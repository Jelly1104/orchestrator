# Quality Rules

> ReviewAgent가 참조하는 품질 검증 규칙

---

## 1. 문서 품질 규칙

### 1.1 Syntax 규칙

| ID | 규칙 | 검증 방법 | 심각도 |
|----|------|----------|--------|
| SYN01 | 마크다운 헤더 계층 | H1 → H2 → H3 순서 | MEDIUM |
| SYN02 | 코드 블록 닫힘 | ``` 쌍 확인 | HIGH |
| SYN03 | 테이블 형식 | 헤더-구분선-데이터 | MEDIUM |
| SYN04 | 링크 유효성 | 상대/절대 경로 확인 | LOW |
| SYN05 | 이미지 참조 | 파일 존재 확인 | LOW |

### 1.2 Semantic 규칙

| ID | 규칙 | 검증 방법 | 심각도 |
|----|------|----------|--------|
| SEM01 | 섹션 완결성 | 빈 섹션 없음 | HIGH |
| SEM02 | 논리적 흐름 | 섹션 간 연결 자연스러움 | MEDIUM |
| SEM03 | 용어 정의 | 전문 용어 설명 존재 | LOW |
| SEM04 | 중복 제거 | 동일 내용 반복 없음 | LOW |
| SEM05 | 명확성 | 모호한 표현 ("등", "기타") 최소화 | MEDIUM |

---

## 2. 산출물별 품질 규칙

### 2.1 IA.md 품질 규칙

| ID | 규칙 | 기준 | 심각도 |
|----|------|------|--------|
| IA_Q01 | 계층 깊이 | 최대 4단계 | MEDIUM |
| IA_Q02 | 라우팅 형식 | RESTful 패턴 | MEDIUM |
| IA_Q03 | 데이터 소스 명시 | 테이블/API 구체화 | HIGH |
| IA_Q04 | 상태 정의 | 모든 상태 전이 명시 | MEDIUM |

### 2.2 Wireframe.md 품질 규칙

| ID | 규칙 | 기준 | 심각도 |
|----|------|------|--------|
| WF_Q01 | ASCII 형식 | 박스 문자 사용 | LOW |
| WF_Q02 | 컴포넌트 설명 | 모든 요소 설명 | HIGH |
| WF_Q03 | 데이터 바인딩 | 필드-소스 매핑 | HIGH |
| WF_Q04 | 인터랙션 정의 | 트리거-액션-결과 | HIGH |
| WF_Q05 | 반응형 고려 | 최소 2가지 뷰포트 | MEDIUM |

### 2.3 SDD.md 품질 규칙

| ID | 규칙 | 기준 | 심각도 |
|----|------|------|--------|
| SD_Q01 | API 완전성 | HTTP 메서드, 경로, 파라미터 | HIGH |
| SD_Q02 | 응답 형식 | JSON 스키마 정의 | HIGH |
| SD_Q03 | 에러 처리 | 에러 코드 및 메시지 | MEDIUM |
| SD_Q04 | 데이터 모델 | 테이블명, 컬럼, 타입 | HIGH |
| SD_Q05 | 비기능 요구 | 성능/보안 최소 1개 | MEDIUM |

---

## 3. 심각도 정의

| 레벨 | 설명 | 조치 |
|------|------|------|
| **HIGH** | 핵심 기능 영향, PRD 불일치 | 즉시 수정 필수, FAIL 처리 |
| **MEDIUM** | 품질 저하, 가독성 문제 | 수정 권장, WARN 처리 |
| **LOW** | 사소한 개선점 | 선택적 수정, INFO 처리 |

---

## 4. 점수 산정 규칙

### 4.1 기본 점수

| 상태 | 점수 |
|------|------|
| PASS | 100 |
| WARN | 70 |
| FAIL | 0 |

### 4.2 가중치 적용

```
최종 점수 = Σ(항목 점수 × 가중치)

가중치:
- HIGH 항목: 2.0
- MEDIUM 항목: 1.0
- LOW 항목: 0.5
```

### 4.3 합격 기준

```
합격 조건:
1. 최종 점수 ≥ 80
2. HIGH 심각도 FAIL 항목 = 0
3. PRD 매칭률 ≥ 80%
```

---

## 5. 검증 프로세스

### 5.1 검증 순서

```
1. Syntax 검증 (형식)
   ↓
2. Semantic 검증 (내용)
   ↓
3. PRD 매칭 검증 (요구사항)
   ↓
4. Cross-Reference 검증 (정합성)
   ↓
5. 점수 산정 및 판정
```

### 5.2 Early Fail 조건

다음 조건 발생 시 즉시 FAIL:
- HIGH 심각도 항목 3개 이상 FAIL
- PRD 필수 기능 누락
- 산출물 파일 누락

---

## 6. 피드백 규칙

### 6.1 피드백 형식

```json
{
  "ruleId": "WF_Q03",
  "severity": "HIGH",
  "status": "FAIL",
  "location": "Wireframe.md > 섹션 2.1 > Card 컴포넌트",
  "description": "데이터 바인딩 누락",
  "expected": "title, description, imageUrl 필드 바인딩",
  "actual": "title만 바인딩됨",
  "recommendation": "description, imageUrl 필드 바인딩 추가"
}
```

### 6.2 개선 권고 우선순위

1. HIGH 심각도 이슈
2. PRD 매칭 관련 이슈
3. MEDIUM 심각도 이슈
4. LOW 심각도 이슈

---

## 7. 예외 규칙

### 7.1 허용 예외

| 상황 | 예외 처리 |
|------|----------|
| MVP 버전 | 반응형 규칙 완화 |
| PoC 단계 | 비기능 요구 규칙 완화 |
| 분석 전용 PRD | Wireframe 규칙 제외 |

### 7.2 예외 신청

예외가 필요한 경우 다음 정보 포함:
- 예외 사유
- 영향 범위
- 대체 방안

---

**END OF QUALITY RULES**
