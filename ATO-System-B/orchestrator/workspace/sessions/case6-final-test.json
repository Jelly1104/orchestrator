{
  "taskId": "case6-final-test",
  "prdPath": "# PRD: 오케스트레이터 통합 기능 검증\n\n> **Case ID**: case6-orchestrator-validation-20251223\n> **PRD 버전**: 1.0.0\n> **작성일**: 2025-12-23\n> **작성자**: ATO Team\n> **타입**: MIXED\n> **파이프라인**: mixed\n\n---\n\n## 1. 목적 (Objective)\n\n**오케스트레이터의 전체 파이프라인 정상 작동 여부를 검증하기 위해 실제 비즈니스 시나리오 기반 통합 테스트를 수행한다.**\n\n### 1.1 검증 대상 컴포넌트\n\n| 컴포넌트      | 검증 항목                                |\n| ------------- | ---------------------------------------- |\n| PRD Analyzer  | Gap Check, 유형 판별, 파이프라인 매칭    |\n| Leader Agent  | Planning Mode, Review Mode, HANDOFF 생성 |\n| SubAgent      | 코드 생성, TDD 준수, Output Validation   |\n| AnalysisAgent | SQL 생성, 스키마 검증, 결과 해석         |\n| Orchestrator  | 라우팅, 재시도, 로깅, 보안 레이어        |\n| HITL          | 5개 체크포인트 트리거 확인               |\n\n---\n\n## 2. 타겟 유저 (Target User)\n\n| 페르소나    | 역할                  | 사용 맥락             |\n| ----------- | --------------------- | --------------------- |\n| AI PM       | 오케스트레이터 관리자 | 시스템 정상 작동 검증 |\n| QA 엔지니어 | 품질 검증             | 파이프라인 테스트     |\n| DevOps      | 운영 담당             | 배포 전 sanity check  |\n\n---\n\n## 3. 핵심 기능 (Core Features)\n\n### Phase A: 정량적 분석 (AnalysisAgent 검증)\n\n| ID  | 기능                    | 검증 포인트                  |\n| --- | ----------------------- | ---------------------------- |\n| A1  | 활성 회원 세그먼트 조회 | SQL 생성, DOMAIN_SCHEMA 준수 |\n| A2  | 전문과목별 분포 분석    | JOIN 쿼리, 인덱스 활용       |\n| A3  | 로그인 패턴 분석        | 대용량 테이블 LIMIT 적용     |\n| A4  | 결과 데이터 해석        | 통계 요약, 패턴 식별         |\n\n**A1: 활성 회원 세그먼트 조회**\n\n```\n- USERS 테이블에서 U_ALIVE='Y' 회원 추출\n- U_KIND별 분포 집계\n- 최근 30일 로그인 회원 필터링 (USER_LOGIN JOIN)\n```\n\n**A2: 전문과목별 분포 분석**\n\n```\n- USER_DETAIL.U_MAJOR_CODE_1 기준 그룹핑\n- 전체 회원 vs 활성 회원 비교\n- +5%p 이상 차이 세그먼트 식별\n```\n\n**A3: 로그인 패턴 분석**\n\n```\n- USER_LOGIN 테이블 (대용량 - 반드시 LIMIT 필요)\n- 시간대별 로그인 분포\n- 요일별 패턴 분석\n- ⚠️ DB_ACCESS_POLICY 제한: 10,000행, 30초 타임아웃\n```\n\n### Phase B: 정성적 설계 (Leader/SubAgent 검증)\n\n| ID  | 기능                  | 검증 포인트                  |\n| --- | --------------------- | ---------------------------- |\n| B1  | 분석 대시보드 IA 설계 | 정보 구조, 네비게이션        |\n| B2  | Wireframe 생성        | 화면 구조, 컴포넌트 배치     |\n| B3  | SDD 작성              | 레거시 스키마 매핑, API 설계 |\n| B4  | HANDOFF 생성          | 필수 섹션, 보안 검증         |\n\n**B1: 분석 대시보드 IA**\n\n```\n- 메인 대시보드\n  ├── 요약 카드 (KPI)\n  ├── 세그먼트 분포 차트\n  ├── 로그인 트렌드\n  └── 필터 패널\n```\n\n**B2: Wireframe 요구사항**\n\n```\n- 반응형 레이아웃 (Desktop/Mobile)\n- 차트 컴포넌트 (Bar, Line, Pie)\n- 필터 드롭다운 (전문과목, 기간, 회원유형)\n- 데이터 테이블 (정렬, 페이징)\n```\n\n### Phase C: 코드 구현 (SubAgent 검증)\n\n| ID  | 기능                | 검증 포인트         |\n| --- | ------------------- | ------------------- |\n| C1  | API 엔드포인트 구현 | TypeScript, TDD     |\n| C2  | React 컴포넌트 구현 | FSD 패턴, Tailwind  |\n| C3  | 테스트 코드 작성    | 커버리지 ≥ 90%      |\n| C4  | Output Validation   | Protected Path 보호 |\n\n**C1: API 엔드포인트**\n\n```typescript\n// 예상 산출물 경로\nbackend/src/features/analytics/\n├── analytics.controller.ts\n├── analytics.service.ts\n├── analytics.repository.ts\n├── dto/\n│   ├── segment-query.dto.ts\n│   └── analytics-response.dto.ts\n└── tests/\n    └── analytics.service.test.ts\n```\n\n**C2: React 컴포넌트**\n\n```typescript\n// 예상 산출물 경로\nfrontend/src/features/analytics/\n├── AnalyticsDashboard.tsx\n├── SegmentChart.tsx\n├── LoginTrendChart.tsx\n├── FilterPanel.tsx\n└── tests/\n    └── AnalyticsDashboard.test.tsx\n```\n\n---\n\n## 4. 성공 지표 (Success Criteria)\n\n### 4.1 정량적 지표\n\n| 지표            | 목표  | 측정 방법               |\n| --------------- | ----- | ----------------------- |\n| SQL 생성 성공률 | 100%  | 4개 쿼리 모두 실행 가능 |\n| 스키마 일치율   | 100%  | DOMAIN_SCHEMA.md 대조   |\n| 테스트 커버리지 | ≥ 90% | Jest/Vitest 리포트      |\n| 빌드 성공       | PASS  | TypeScript 컴파일       |\n\n### 4.2 정성적 지표\n\n| 지표             | 목표               | 측정 방법          |\n| ---------------- | ------------------ | ------------------ |\n| IA 완성도        | 모든 화면 정의     | 리뷰어 확인        |\n| Wireframe 명확성 | 컴포넌트 배치 명확 | 리뷰어 확인        |\n| SDD 레거시 매핑  | 모든 테이블 매핑   | DOMAIN_SCHEMA 대조 |\n\n### 4.3 시스템 지표 (오케스트레이터)\n\n| 지표            | 목표             | 측정 방법            |\n| --------------- | ---------------- | -------------------- |\n| 파이프라인 완주 | Phase A→B→C 완료 | 로그 확인            |\n| HITL 트리거     | 최소 2회         | 설계 승인, 쿼리 검토 |\n| 재시도 횟수     | ≤ 3회            | 메트릭 로그          |\n| 보안 위반       | 0건              | audit 로그           |\n\n---\n\n## 5. PRD 유형 및 파이프라인\n\n```yaml\ntype: MIXED\npipeline: mixed\n\nrationale:\n  - Phase A: 정량적 (SQL 실행 → 데이터 수집)\n  - Phase B: 정성적 (설계 문서 생성)\n  - Phase C: 코드 (구현 + 테스트)\n\nagent_routing:\n  - Phase A: AnalysisAgent\n  - Phase B: LeaderAgent\n  - Phase C: SubAgent (via HANDOFF)\n```\n\n---\n\n## 6. 데이터 요구사항 (정량적 Phase 필수)\n\n### 6.1 필요 테이블\n\n| 테이블      | 용도                 | 예상 행 수 | 제약          |\n| ----------- | -------------------- | ---------- | ------------- |\n| USERS       | 회원 기본 정보       | ~500K      | -             |\n| USER_DETAIL | 회원 상세 (전문과목) | ~500K      | -             |\n| USER_LOGIN  | 로그인 이력          | ~10M+      | ⚠️ LIMIT 필수 |\n\n### 6.2 필요 컬럼\n\n```yaml\nUSERS:\n  - U_ID (PK)\n  - U_KIND (회원 유형)\n  - U_ALIVE (활성 여부)\n  - REG_DATE (가입일)\n\nUSER_DETAIL:\n  - U_ID (FK)\n  - U_MAJOR_CODE_1 (전문과목)\n  - U_WORK_TYPE_1 (근무형태)\n\nUSER_LOGIN:\n  - U_ID (FK)\n  - LOGIN_DATE (로그인 일시)\n  - LOGIN_IP\n```\n\n### 6.3 DB 연결 정보\n\n```yaml\nhost: \"222.122.26.242\"\nport: 3306\ndatabase: \"medigate\"\nuser: \"ai_readonly\" # SELECT only\n```\n\n---\n\n## 7. 산출물 체크리스트\n\n### Phase A 산출물\n\n| 산출물                  | 타입           | 검증 기준                     |\n| ----------------------- | -------------- | ----------------------------- |\n| segment_query.sql       | SQL_QUERY      | DOMAIN_SCHEMA 일치, 실행 가능 |\n| distribution_query.sql  | SQL_QUERY      | JOIN 정확성, 인덱스 활용      |\n| login_pattern_query.sql | SQL_QUERY      | LIMIT 포함, 타임아웃 미초과   |\n| analysis_result.json    | ANALYSIS_TABLE | 데이터 존재, 스키마 정의      |\n| insight_report.md       | REPORT         | 패턴 식별, 인사이트 도출      |\n\n### Phase B 산출물\n\n| 산출물       | 타입        | 검증 기준             |\n| ------------ | ----------- | --------------------- |\n| IA.md        | IA_DOCUMENT | 레벨 구조, 네이밍     |\n| Wireframe.md | WIREFRAME   | ASCII/Markdown 형식   |\n| SDD.md       | SDD         | 레거시 매핑, API 정의 |\n| HANDOFF.md   | HANDOFF     | 필수 섹션, 보안 검증  |\n\n### Phase C 산출물\n\n| 산출물                                 | 타입 | 검증 기준            |\n| -------------------------------------- | ---- | -------------------- |\n| backend/src/features/analytics/\\*.ts   | CODE | 빌드 성공, 타입 체크 |\n| frontend/src/features/analytics/\\*.tsx | CODE | 빌드 성공, 린트 통과 |\n| \\*_/tests/_.test.ts                    | TEST | 커버리지 ≥ 90%       |\n\n---\n\n## 8. 제약사항 (Constraints)\n\n### 8.1 기술 제약\n\n| 제약            | 내용                | 참조 문서         |\n| --------------- | ------------------- | ----------------- |\n| TypeScript 필수 | strict: true        | CODE_STYLE.md     |\n| TDD 준수        | Red→Green→Refactor  | TDD_WORKFLOW.md   |\n| 레거시 컬럼명   | 변환 금지 (U_ID 등) | CODE_STYLE.md 1.1 |\n| FSD 패턴        | 프론트엔드 구조     | CODE_STYLE.md 2.2 |\n\n### 8.2 보안 제약\n\n| 제약           | 내용                       | 참조 문서             |\n| -------------- | -------------------------- | --------------------- |\n| SELECT only    | INSERT/UPDATE/DELETE 금지  | DB_ACCESS_POLICY.md   |\n| Protected Path | .claude/rules/\\* 수정 금지 | AGENT_ARCHITECTURE.md |\n| 행 제한        | 10,000행 이하              | DB_ACCESS_POLICY.md   |\n| 타임아웃       | 30초 이하                  | DB_ACCESS_POLICY.md   |\n\n### 8.3 HITL 체크포인트\n\n| 체크포인트 | 트리거 조건        | 예상 발생          |\n| ---------- | ------------------ | ------------------ |\n| 쿼리 검토  | SQL 결과 이상 시   | Phase A            |\n| 설계 승인  | IA/SDD 완료 시     | Phase B            |\n| 수동 수정  | Review 3회 FAIL 시 | Phase C (optional) |\n\n---\n\n## 9. 검증 시나리오\n\n### 9.1 Happy Path\n\n```\n1. PRD 입력 → Gap Check PASS\n2. 유형 판별 → MIXED 확인\n3. Phase A 실행 → SQL 4개 생성 및 실행\n4. [HITL] 쿼리 결과 검토 → 승인\n5. Phase B 실행 → IA/Wireframe/SDD/HANDOFF 생성\n6. [HITL] 설계 승인 → 승인\n7. Phase C 실행 → 코드 생성\n8. Output Validation → PASS\n9. Leader Review → PASS\n10. 최종 산출물 저장 → 완료\n```\n\n### 9.2 Edge Cases\n\n| 시나리오            | 예상 동작          | 검증        |\n| ------------------- | ------------------ | ----------- |\n| SQL 타임아웃        | LIMIT 추가 재시도  | 로그 확인   |\n| 스키마 불일치       | 사용자 확인 요청   | HITL 트리거 |\n| Review FAIL         | 피드백 반영 재시도 | 최대 5회    |\n| Protected Path 접근 | 즉시 차단          | audit 로그  |\n\n---\n\n## 10. 관련 문서\n\n| 문서                    | 역할                  |\n| ----------------------- | --------------------- |\n| `DOMAIN_SCHEMA.md`      | 테이블/컬럼 정의      |\n| `DB_ACCESS_POLICY.md`   | DB 접근 권한          |\n| `AGENT_ARCHITECTURE.md` | 파이프라인 정의, HITL |\n| `VALIDATION_GUIDE.md`   | 산출물 검증 기준      |\n| `CODE_STYLE.md`         | 코딩 컨벤션           |\n| `TDD_WORKFLOW.md`       | TDD 절차              |\n\n---\n\n## 11. 예상 소요 시간\n\n| Phase          | 예상 시간 | 비고          |\n| -------------- | --------- | ------------- |\n| PRD Gap Check  | 1분       | 자동          |\n| Phase A (분석) | 10분      | SQL 4개       |\n| Phase B (설계) | 15분      | 문서 4개      |\n| HITL 대기      | 5분       | 설계 승인     |\n| Phase C (구현) | 20분      | 코드 + 테스트 |\n| Review 사이클  | 10분      | 최대 2회      |\n| **Total**      | **~60분** |               |\n\n---\n\n**END OF PRD**\n",
  "status": "RUNNING",
  "currentPhase": "initialized",
  "currentCheckpoint": null,
  "createdAt": "2025-12-24T06:10:10.369Z",
  "updatedAt": "2025-12-24T06:10:10.377Z",
  "history": [
    {
      "event": "SESSION_CREATED",
      "data": {
        "prdPath": "# PRD: 오케스트레이터 통합 기능 검증\n\n> **Case ID**: case6-orchestrator-validation-20251223\n> **PRD 버전**: 1.0.0\n> **작성일**: 2025-12-23\n> **작성자**: ATO Team\n> **타입**: MIXED\n> **파이프라인**: mixed\n\n---\n\n## 1. 목적 (Objective)\n\n**오케스트레이터의 전체 파이프라인 정상 작동 여부를 검증하기 위해 실제 비즈니스 시나리오 기반 통합 테스트를 수행한다.**\n\n### 1.1 검증 대상 컴포넌트\n\n| 컴포넌트      | 검증 항목                                |\n| ------------- | ---------------------------------------- |\n| PRD Analyzer  | Gap Check, 유형 판별, 파이프라인 매칭    |\n| Leader Agent  | Planning Mode, Review Mode, HANDOFF 생성 |\n| SubAgent      | 코드 생성, TDD 준수, Output Validation   |\n| AnalysisAgent | SQL 생성, 스키마 검증, 결과 해석         |\n| Orchestrator  | 라우팅, 재시도, 로깅, 보안 레이어        |\n| HITL          | 5개 체크포인트 트리거 확인               |\n\n---\n\n## 2. 타겟 유저 (Target User)\n\n| 페르소나    | 역할                  | 사용 맥락             |\n| ----------- | --------------------- | --------------------- |\n| AI PM       | 오케스트레이터 관리자 | 시스템 정상 작동 검증 |\n| QA 엔지니어 | 품질 검증             | 파이프라인 테스트     |\n| DevOps      | 운영 담당             | 배포 전 sanity check  |\n\n---\n\n## 3. 핵심 기능 (Core Features)\n\n### Phase A: 정량적 분석 (AnalysisAgent 검증)\n\n| ID  | 기능                    | 검증 포인트                  |\n| --- | ----------------------- | ---------------------------- |\n| A1  | 활성 회원 세그먼트 조회 | SQL 생성, DOMAIN_SCHEMA 준수 |\n| A2  | 전문과목별 분포 분석    | JOIN 쿼리, 인덱스 활용       |\n| A3  | 로그인 패턴 분석        | 대용량 테이블 LIMIT 적용     |\n| A4  | 결과 데이터 해석        | 통계 요약, 패턴 식별         |\n\n**A1: 활성 회원 세그먼트 조회**\n\n```\n- USERS 테이블에서 U_ALIVE='Y' 회원 추출\n- U_KIND별 분포 집계\n- 최근 30일 로그인 회원 필터링 (USER_LOGIN JOIN)\n```\n\n**A2: 전문과목별 분포 분석**\n\n```\n- USER_DETAIL.U_MAJOR_CODE_1 기준 그룹핑\n- 전체 회원 vs 활성 회원 비교\n- +5%p 이상 차이 세그먼트 식별\n```\n\n**A3: 로그인 패턴 분석**\n\n```\n- USER_LOGIN 테이블 (대용량 - 반드시 LIMIT 필요)\n- 시간대별 로그인 분포\n- 요일별 패턴 분석\n- ⚠️ DB_ACCESS_POLICY 제한: 10,000행, 30초 타임아웃\n```\n\n### Phase B: 정성적 설계 (Leader/SubAgent 검증)\n\n| ID  | 기능                  | 검증 포인트                  |\n| --- | --------------------- | ---------------------------- |\n| B1  | 분석 대시보드 IA 설계 | 정보 구조, 네비게이션        |\n| B2  | Wireframe 생성        | 화면 구조, 컴포넌트 배치     |\n| B3  | SDD 작성              | 레거시 스키마 매핑, API 설계 |\n| B4  | HANDOFF 생성          | 필수 섹션, 보안 검증         |\n\n**B1: 분석 대시보드 IA**\n\n```\n- 메인 대시보드\n  ├── 요약 카드 (KPI)\n  ├── 세그먼트 분포 차트\n  ├── 로그인 트렌드\n  └── 필터 패널\n```\n\n**B2: Wireframe 요구사항**\n\n```\n- 반응형 레이아웃 (Desktop/Mobile)\n- 차트 컴포넌트 (Bar, Line, Pie)\n- 필터 드롭다운 (전문과목, 기간, 회원유형)\n- 데이터 테이블 (정렬, 페이징)\n```\n\n### Phase C: 코드 구현 (SubAgent 검증)\n\n| ID  | 기능                | 검증 포인트         |\n| --- | ------------------- | ------------------- |\n| C1  | API 엔드포인트 구현 | TypeScript, TDD     |\n| C2  | React 컴포넌트 구현 | FSD 패턴, Tailwind  |\n| C3  | 테스트 코드 작성    | 커버리지 ≥ 90%      |\n| C4  | Output Validation   | Protected Path 보호 |\n\n**C1: API 엔드포인트**\n\n```typescript\n// 예상 산출물 경로\nbackend/src/features/analytics/\n├── analytics.controller.ts\n├── analytics.service.ts\n├── analytics.repository.ts\n├── dto/\n│   ├── segment-query.dto.ts\n│   └── analytics-response.dto.ts\n└── tests/\n    └── analytics.service.test.ts\n```\n\n**C2: React 컴포넌트**\n\n```typescript\n// 예상 산출물 경로\nfrontend/src/features/analytics/\n├── AnalyticsDashboard.tsx\n├── SegmentChart.tsx\n├── LoginTrendChart.tsx\n├── FilterPanel.tsx\n└── tests/\n    └── AnalyticsDashboard.test.tsx\n```\n\n---\n\n## 4. 성공 지표 (Success Criteria)\n\n### 4.1 정량적 지표\n\n| 지표            | 목표  | 측정 방법               |\n| --------------- | ----- | ----------------------- |\n| SQL 생성 성공률 | 100%  | 4개 쿼리 모두 실행 가능 |\n| 스키마 일치율   | 100%  | DOMAIN_SCHEMA.md 대조   |\n| 테스트 커버리지 | ≥ 90% | Jest/Vitest 리포트      |\n| 빌드 성공       | PASS  | TypeScript 컴파일       |\n\n### 4.2 정성적 지표\n\n| 지표             | 목표               | 측정 방법          |\n| ---------------- | ------------------ | ------------------ |\n| IA 완성도        | 모든 화면 정의     | 리뷰어 확인        |\n| Wireframe 명확성 | 컴포넌트 배치 명확 | 리뷰어 확인        |\n| SDD 레거시 매핑  | 모든 테이블 매핑   | DOMAIN_SCHEMA 대조 |\n\n### 4.3 시스템 지표 (오케스트레이터)\n\n| 지표            | 목표             | 측정 방법            |\n| --------------- | ---------------- | -------------------- |\n| 파이프라인 완주 | Phase A→B→C 완료 | 로그 확인            |\n| HITL 트리거     | 최소 2회         | 설계 승인, 쿼리 검토 |\n| 재시도 횟수     | ≤ 3회            | 메트릭 로그          |\n| 보안 위반       | 0건              | audit 로그           |\n\n---\n\n## 5. PRD 유형 및 파이프라인\n\n```yaml\ntype: MIXED\npipeline: mixed\n\nrationale:\n  - Phase A: 정량적 (SQL 실행 → 데이터 수집)\n  - Phase B: 정성적 (설계 문서 생성)\n  - Phase C: 코드 (구현 + 테스트)\n\nagent_routing:\n  - Phase A: AnalysisAgent\n  - Phase B: LeaderAgent\n  - Phase C: SubAgent (via HANDOFF)\n```\n\n---\n\n## 6. 데이터 요구사항 (정량적 Phase 필수)\n\n### 6.1 필요 테이블\n\n| 테이블      | 용도                 | 예상 행 수 | 제약          |\n| ----------- | -------------------- | ---------- | ------------- |\n| USERS       | 회원 기본 정보       | ~500K      | -             |\n| USER_DETAIL | 회원 상세 (전문과목) | ~500K      | -             |\n| USER_LOGIN  | 로그인 이력          | ~10M+      | ⚠️ LIMIT 필수 |\n\n### 6.2 필요 컬럼\n\n```yaml\nUSERS:\n  - U_ID (PK)\n  - U_KIND (회원 유형)\n  - U_ALIVE (활성 여부)\n  - REG_DATE (가입일)\n\nUSER_DETAIL:\n  - U_ID (FK)\n  - U_MAJOR_CODE_1 (전문과목)\n  - U_WORK_TYPE_1 (근무형태)\n\nUSER_LOGIN:\n  - U_ID (FK)\n  - LOGIN_DATE (로그인 일시)\n  - LOGIN_IP\n```\n\n### 6.3 DB 연결 정보\n\n```yaml\nhost: \"222.122.26.242\"\nport: 3306\ndatabase: \"medigate\"\nuser: \"ai_readonly\" # SELECT only\n```\n\n---\n\n## 7. 산출물 체크리스트\n\n### Phase A 산출물\n\n| 산출물                  | 타입           | 검증 기준                     |\n| ----------------------- | -------------- | ----------------------------- |\n| segment_query.sql       | SQL_QUERY      | DOMAIN_SCHEMA 일치, 실행 가능 |\n| distribution_query.sql  | SQL_QUERY      | JOIN 정확성, 인덱스 활용      |\n| login_pattern_query.sql | SQL_QUERY      | LIMIT 포함, 타임아웃 미초과   |\n| analysis_result.json    | ANALYSIS_TABLE | 데이터 존재, 스키마 정의      |\n| insight_report.md       | REPORT         | 패턴 식별, 인사이트 도출      |\n\n### Phase B 산출물\n\n| 산출물       | 타입        | 검증 기준             |\n| ------------ | ----------- | --------------------- |\n| IA.md        | IA_DOCUMENT | 레벨 구조, 네이밍     |\n| Wireframe.md | WIREFRAME   | ASCII/Markdown 형식   |\n| SDD.md       | SDD         | 레거시 매핑, API 정의 |\n| HANDOFF.md   | HANDOFF     | 필수 섹션, 보안 검증  |\n\n### Phase C 산출물\n\n| 산출물                                 | 타입 | 검증 기준            |\n| -------------------------------------- | ---- | -------------------- |\n| backend/src/features/analytics/\\*.ts   | CODE | 빌드 성공, 타입 체크 |\n| frontend/src/features/analytics/\\*.tsx | CODE | 빌드 성공, 린트 통과 |\n| \\*_/tests/_.test.ts                    | TEST | 커버리지 ≥ 90%       |\n\n---\n\n## 8. 제약사항 (Constraints)\n\n### 8.1 기술 제약\n\n| 제약            | 내용                | 참조 문서         |\n| --------------- | ------------------- | ----------------- |\n| TypeScript 필수 | strict: true        | CODE_STYLE.md     |\n| TDD 준수        | Red→Green→Refactor  | TDD_WORKFLOW.md   |\n| 레거시 컬럼명   | 변환 금지 (U_ID 등) | CODE_STYLE.md 1.1 |\n| FSD 패턴        | 프론트엔드 구조     | CODE_STYLE.md 2.2 |\n\n### 8.2 보안 제약\n\n| 제약           | 내용                       | 참조 문서             |\n| -------------- | -------------------------- | --------------------- |\n| SELECT only    | INSERT/UPDATE/DELETE 금지  | DB_ACCESS_POLICY.md   |\n| Protected Path | .claude/rules/\\* 수정 금지 | AGENT_ARCHITECTURE.md |\n| 행 제한        | 10,000행 이하              | DB_ACCESS_POLICY.md   |\n| 타임아웃       | 30초 이하                  | DB_ACCESS_POLICY.md   |\n\n### 8.3 HITL 체크포인트\n\n| 체크포인트 | 트리거 조건        | 예상 발생          |\n| ---------- | ------------------ | ------------------ |\n| 쿼리 검토  | SQL 결과 이상 시   | Phase A            |\n| 설계 승인  | IA/SDD 완료 시     | Phase B            |\n| 수동 수정  | Review 3회 FAIL 시 | Phase C (optional) |\n\n---\n\n## 9. 검증 시나리오\n\n### 9.1 Happy Path\n\n```\n1. PRD 입력 → Gap Check PASS\n2. 유형 판별 → MIXED 확인\n3. Phase A 실행 → SQL 4개 생성 및 실행\n4. [HITL] 쿼리 결과 검토 → 승인\n5. Phase B 실행 → IA/Wireframe/SDD/HANDOFF 생성\n6. [HITL] 설계 승인 → 승인\n7. Phase C 실행 → 코드 생성\n8. Output Validation → PASS\n9. Leader Review → PASS\n10. 최종 산출물 저장 → 완료\n```\n\n### 9.2 Edge Cases\n\n| 시나리오            | 예상 동작          | 검증        |\n| ------------------- | ------------------ | ----------- |\n| SQL 타임아웃        | LIMIT 추가 재시도  | 로그 확인   |\n| 스키마 불일치       | 사용자 확인 요청   | HITL 트리거 |\n| Review FAIL         | 피드백 반영 재시도 | 최대 5회    |\n| Protected Path 접근 | 즉시 차단          | audit 로그  |\n\n---\n\n## 10. 관련 문서\n\n| 문서                    | 역할                  |\n| ----------------------- | --------------------- |\n| `DOMAIN_SCHEMA.md`      | 테이블/컬럼 정의      |\n| `DB_ACCESS_POLICY.md`   | DB 접근 권한          |\n| `AGENT_ARCHITECTURE.md` | 파이프라인 정의, HITL |\n| `VALIDATION_GUIDE.md`   | 산출물 검증 기준      |\n| `CODE_STYLE.md`         | 코딩 컨벤션           |\n| `TDD_WORKFLOW.md`       | TDD 절차              |\n\n---\n\n## 11. 예상 소요 시간\n\n| Phase          | 예상 시간 | 비고          |\n| -------------- | --------- | ------------- |\n| PRD Gap Check  | 1분       | 자동          |\n| Phase A (분석) | 10분      | SQL 4개       |\n| Phase B (설계) | 15분      | 문서 4개      |\n| HITL 대기      | 5분       | 설계 승인     |\n| Phase C (구현) | 20분      | 코드 + 테스트 |\n| Review 사이클  | 10분      | 최대 2회      |\n| **Total**      | **~60분** |               |\n\n---\n\n**END OF PRD**\n"
      },
      "timestamp": "2025-12-24T06:10:10.376Z"
    },
    {
      "event": "STATUS_CHANGED",
      "data": {
        "status": "RUNNING",
        "currentPhase": "initialized"
      },
      "timestamp": "2025-12-24T06:10:10.377Z"
    }
  ],
  "metadata": {
    "pipeline": "auto",
    "mode": null,
    "projectRoot": "/Users/m2-mini/Desktop/eunah/ATO-System-B",
    "maxRetries": 3,
    "autoApprove": true
  },
  "retryCount": 0,
  "maxRetries": 3
}