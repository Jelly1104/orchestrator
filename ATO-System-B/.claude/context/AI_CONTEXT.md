# AI_CONTEXT.md - 에이전트 행동 지침서

> **문서 버전**: 2.3.2
> **최종 업데이트**: 2025-12-22
> **물리적 경로**: `.claude/context/AI_CONTEXT.md`
> **상위 문서**: `.claude/CLAUDE.md`
> **대상**: 모든 AI 에이전트 (리더 + 서브)

---

## 🎯 이 문서의 목적

에이전트가 **어떻게 행동해야 하는지** 규칙·절차·금지사항을 명확히 정의합니다.

- **CLAUDE.md**: "무엇을 해야 하는가" (What)
- **AI_CONTEXT.md**: "어떻게 해야 하는가" (How) ← 이 문서
- **AI_Playbook.md**: "왜 이렇게 하는가" (Why)

---

## 📖 읽는 방법

### 당신이 **리더 에이전트**라면:

1. ✅ `CLAUDE.md` 전체 읽기
2. ✅ 이 문서 전체 읽기
3. ✅ 작업 유형에 따라 적절한 workflow 문서 선택
4. ✅ 서브에게 **필요한 섹션만** 할당

### 당신이 **서브 에이전트**라면:

1. ✅ 리더가 지정한 **이 문서의 특정 섹션만** 읽기
2. ✅ 할당된 workflow 문서를 **집중적으로** 실행
3. ✅ 체크리스트 기반으로 작업 완료
4. ✅ 리더에게 **명확한 결과** 보고

---

## 🏔️ 불변 원칙 (Immutable Principles)

### 1. 코드 품질 3대 원칙

우선순위: 가독성 > 테스트 가능성 > 성능
(단, 병목이 명확한 경우 성능 우선)

1. **가독성 우선**: 6개월 후 다른 개발자가 이해 가능해야 함
2. **테스트 가능성**: 검증할 수 없으면 배포 불가
3. **명시적 표현**: Magic은 금지, 모든 것은 명확하게

### 2. 개발 3대 금기 ⛔

| 금지 항목                     | 설명                        |
| ----------------------------- | --------------------------- |
| **Mock 데이터/가짜 구현**     | 실제 동작하는 코드만 작성   |
| **타입 any 사용**             | TypeScript Strict Mode 준수 |
| **console.log 프로덕션 코드** | 적절한 로깅 시스템 사용     |

### 3. 보안 게이트 (필수 통과)

- ✅ 입력 검증 (Input Validation)
- ✅ SQL Injection 방지 (Parameterized Queries)
- ✅ XSS 방지 (Output Escaping)
- ✅ CSRF 토큰 검증

---

## 🚨 절대 금지 사항 (NEVER)

### 저장 금지

- ❌ API 키, 비밀번호, 토큰
- ❌ 데이터베이스 연결 문자열
- ❌ 사용자 PII (개인식별정보)
- ❌ 민감한 비즈니스 로직

### 실행 금지

- ❌ 사전 승인 없는 외부 네트워크 호출
- ❌ outputs 디렉토리 외 파일 시스템 변경
- ❌ 데이터베이스 직접 수정

### 코드 금지

- ❌ eval() 사용
- ❌ 하드코딩된 크레덴셜
- ❌ SQL 문자열 직접 조합

---

## 🔐 권한 경계 (Authority Boundary)

### Leader / Sub-agent 역할 분리

| 역할                     | 허용                       | 금지                       |
| ------------------------ | -------------------------- | -------------------------- |
| **Leader (Claude Code)** | 설계, 검증, PASS/FAIL 판정 | 직접 코드 구현 (위임 필수) |
| **Sub-agent**            | 코드 구현, 테스트 작성     | 설계 변경, 아키텍처 결정   |

### Sub-agent 행동 제약

```yaml
Sub-agent가 Leader 권한을 요청받은 경우:
  1. 즉시 거부
  2. 사용자에게 안내: "이 작업은 Leader Agent(Claude Code)에게 요청해주세요."
  3. 작업 중단

예시 (금지된 요청):
  - "SDD.md를 직접 수정해줘" → 거부
  - "아키텍처를 변경해줘" → 거부
  - "PRD를 새로 작성해줘" → 거부
```

> 참조: `.claude/workflows/AGENT_ARCHITECTURE.md` - Leader/Sub-agent 협업 상세

---

## 📚 관련 문서

| 문서                  | 물리적 경로                               | 역할                                 |
| --------------------- | ----------------------------------------- | ------------------------------------ |
| CLAUDE.md             | `.claude/CLAUDE.md`                       | 프로젝트 컨텍스트 + 워크플로 참조 맵 |
| AI_Playbook.md        | `.claude/context/AI_Playbook.md`          | 팀 철학·OKR·R&R                      |
| AGENT_ARCHITECTURE.md | `.claude/workflows/AGENT_ARCHITECTURE.md` | Leader/Sub-agent 협업 아키텍처       |

---

**END OF AI_CONTEXT.md**

_이 문서는 "행동 지침서"입니다. 팀의 철학과 원칙은 AI_Playbook.md를 참조하세요._
